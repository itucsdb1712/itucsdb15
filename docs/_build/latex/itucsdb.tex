%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[a4paper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
 \ifdefined\DeclareUnicodeCharacterAsOptional
  \DeclareUnicodeCharacter{"00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{"2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{"2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{"2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{"251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{"2572}{\textbackslash}
 \else
  \DeclareUnicodeCharacter{00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{2572}{\textbackslash}
 \fi
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage[dontkeepoldnames]{sphinx}

\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
\addto\captionsenglish{\renewcommand{\tablename}{Table}}
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\captionsenglish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsenglish{\renewcommand{\literalblockcontinuesname}{continues on next page}}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{0}



\title{itucsdb Documentation}
\date{Dec 22, 2017}
\release{1.0}
\author{ITUCSDB 12}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex

\begin{document}

\maketitle
\sphinxtableofcontents
\phantomsection\label{\detokenize{index::doc}}

\begin{quote}\begin{description}
\item[{Team}] \leavevmode
ITUCSDB 12

\item[{Members}] \leavevmode\begin{itemize}
\item {} 
Oğuzhan Kocatürk

\item {} 
Muhammed İşiyok
\begin{quote}

Project development is a hard and expensive process. If a project is small and a couple of people work on it, there will be no
communication problem between them. But when the projects get larger and larger, communication between its members also getting hard.
In order to solve this communication problem and make project creation process easier we created a web application named ProjectEasy. This project aims
to create a great communication between project members and deal with arrangement of project tasks.
\end{quote}

\end{itemize}

\end{description}\end{quote}

Contents:


\chapter{User Guide}
\label{\detokenize{user/index:user-guide}}\label{\detokenize{user/index:welcome-to-itucsdb-s-documentation}}\label{\detokenize{user/index::doc}}

\section{Parts Implemented by Oguzhan Kocaturk}
\label{\detokenize{user/member1:parts-implemented-by-oguzhan-kocaturk}}\label{\detokenize{user/member1::doc}}
Welcome to the user guide. In this guide I will show you how to use ProjectEasy pages. When you first enter to the website
you will see the login screen(Fig 1.1). There is no “Sign Up” because system admin can only add companies and after that companies log in to the system
and they create their own employees.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{login_page}.jpg}
\caption{Login Page.}\label{\detokenize{user/member1:id1}}\end{figure}

If you want to create a company you need admin account to do that job. You can reach create company menu only after you logged in as admin
After logged in, you can click create company menu on the topbar and reach the creation page(Fig 1.2).

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{add_company_page}.jpg}
\caption{Create Company Page.}\label{\detokenize{user/member1:id2}}\end{figure}

When you fill the form and click submit, company will be created. But also a user with the type of the company will be created.
Its username will be the name of the company, and its password will be the password that you have just entered. If you want to see
all companies you can click on the “List Companies” button(Fig 1.3).

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{list_companies}.jpg}
\caption{List Company Page}\label{\detokenize{user/member1:id3}}\end{figure}

If you want to delete or alter a company you can click “Alter company” menu(Fig 1.4). You need to write company name to change
its properties or delete it. After you write the name of the company you can go update page by clicking update button or you can
delete it from the database by clicking delete button.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{alter_company}.jpg}
\caption{Alter Company Page}\label{\detokenize{user/member1:id4}}\end{figure}

Finally you can click to “Logout” button to logout from the system.

You can now login to the system as a company that you have created before.
When you log in as a company you can add employee accounts to the system through “Add Employee” menu(Fig 1.5). When you fill the form and
click submit button system will create a username and password for the employee so employee can be log in to the system by using
those username and password.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{add_employee}.jpg}
\caption{Add Employee Page}\label{\detokenize{user/member1:id5}}\end{figure}

You can also change user information through “List Employee” menu. If you click delete next to employee that you want to delete,
the employee will be deleted from the system. You can also click to the update button next to employee. After that you can alter
the employee by the form next to it. If you want to include an employee into a project, you can select a project from the dropdown list.
If you do not include him in a project at the creation, you can include it by update menu later(Fig 1.6).

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{employee_page}.jpg}
\caption{Employee Page}\label{\detokenize{user/member1:id6}}\end{figure}

\begin{DUlineblock}{0em}
\item[] 
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 
\end{DUlineblock}

\begin{DUlineblock}{0em}
\item[] 
\end{DUlineblock}


\section{Parts Implemented by Muhammed Isiyok}
\label{\detokenize{user/member2:parts-implemented-by-muhammed-isiyok}}\label{\detokenize{user/member2::doc}}

\chapter{Developer Guide}
\label{\detokenize{developer/index:developer-guide}}\label{\detokenize{developer/index::doc}}

\section{Database Design}
\label{\detokenize{developer/index:database-design}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{erdiagram}.jpg}
\caption{E/R Diagram of the Database.}\label{\detokenize{developer/index:id1}}\end{figure}


\subsection{Parts Implemented by Oguzhan Kocaturk}
\label{\detokenize{developer/member1:parts-implemented-by-oguzhan-kocaturk}}\label{\detokenize{developer/member1::doc}}
In this guide, I will explain source codes and their function.


\subsubsection{server.py}
\label{\detokenize{developer/member1:server-py}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{login\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{logged\PYGZus{}in}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb+bp}{False}
\PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{4}
\PYG{n}{form} \PYG{o}{=} \PYG{n}{LoginForm}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate\PYGZus{}on\PYGZus{}submit}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{username} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{username}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{password} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{password}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{information} \PYG{o}{=} \PYG{n}{returnCompany}\PYG{p}{(}\PYG{n}{username}\PYG{p}{)}
    \PYG{n+nb}{hash} \PYG{o}{=} \PYG{n}{getUserPwHash}\PYG{p}{(}\PYG{n}{username}\PYG{p}{)}
    \PYG{k}{if} \PYG{n+nb}{hash} \PYG{o+ow}{is} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{flash}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{You have entered wrong username or password.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{login.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{form} \PYG{o}{=} \PYG{n}{form}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{if} \PYG{n+nb}{hash}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]} \PYG{o}{==} \PYG{n}{password}\PYG{p}{:}
        \PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{logged\PYGZus{}in}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb+bp}{True}
        \PYG{n}{flash}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{You have logged in successfully.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
        \PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{username}
        \PYG{k}{if} \PYG{n+nb}{hash}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{1}\PYG{p}{:}
            \PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{1}
            \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}admin.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
        \PYG{k}{if} \PYG{n+nb}{hash}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{2}\PYG{p}{:}
            \PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{2}
            \PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{company\PYGZus{}number}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{information}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
            \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}company.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
        \PYG{k}{if} \PYG{n+nb}{hash}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{3}\PYG{p}{:}
            \PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{3}
            \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}employee.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{else}\PYG{p}{:}
        \PYG{n}{flash}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{You have entered wrong username or password.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
        \PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{login.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{form} \PYG{o}{=} \PYG{n}{form}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

This code piece define the login page and its functions. It checks whether username is in the database or not. If its
in the database, function gets the user type information and write it into the session’s user\_type. If login information is
correct, function calls home\_page function. If login information is false then it renders the login page again.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/home}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{home\PYGZus{}page}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{if} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)} \PYG{o}{==} \PYG{l+m+mi}{1}\PYG{p}{:}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}admin.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{k}{if} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)} \PYG{o}{==} \PYG{l+m+mi}{2}\PYG{p}{:}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}company.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{k}{if} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)} \PYG{o}{==} \PYG{l+m+mi}{3}\PYG{p}{:}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}employee.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{k}{if} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user\PYGZus{}type}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)} \PYG{o}{==} \PYG{l+m+mi}{4}\PYG{p}{:}
    \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{n}{url\PYGZus{}for}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{login\PYGZus{}page}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

According to the user type, this function and route returns proper homepage.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/logout}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{logout}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{logged\PYGZus{}in}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb+bp}{False}
\PYG{n}{session}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{n}{flash}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{You have been logged out successfully.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{n}{url\PYGZus{}for}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{login\PYGZus{}page}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

This logout function removes session information and returns the login page.


\subsubsection{company\_view.py}
\label{\detokenize{developer/member1:company-view-py}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@company\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/addcompany}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{add\PYGZus{}company}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{form} \PYG{o}{=} \PYG{n}{AddCompanyForm}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate\PYGZus{}on\PYGZus{}submit}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{company\PYGZus{}name} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{company\PYGZus{}name}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{number\PYGZus{}of\PYGZus{}employees} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{password} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{company\PYGZus{}account\PYGZus{}pw}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{user\PYGZus{}type} \PYG{o}{=} \PYG{l+m+mi}{2}
    \PYG{n}{addUserToDb}\PYG{p}{(}\PYG{n}{company\PYGZus{}name}\PYG{p}{,} \PYG{n}{password}\PYG{p}{,} \PYG{n}{user\PYGZus{}type}\PYG{p}{)}
    \PYG{n}{addCompanyToDb}\PYG{p}{(}\PYG{n}{company\PYGZus{}name}\PYG{p}{,} \PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{p}{)}
    \PYG{n}{flash}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Company added successfully.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}admin.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{form}\PYG{o}{=}\PYG{n}{form}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{addcompany.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{form}\PYG{o}{=}\PYG{n}{form}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

In this part, function indentify form variable and send it into the html. Read html form data and send this information into the
function that handles database operation. Then return homepage.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@company\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/listcompanies}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{list\PYGZus{}companies}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{information} \PYG{o}{=} \PYG{n}{listCompanies}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{listcompanies.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{informations} \PYG{o}{=} \PYG{n}{information}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

This part, function calls another database function to get database information about companies. Then it renders the information
on the html page.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@company\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/selectcompany}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{select\PYGZus{}company}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{form} \PYG{o}{=} \PYG{n}{SelectCompanyForm}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate\PYGZus{}on\PYGZus{}submit}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{global} \PYG{n}{company\PYGZus{}name\PYGZus{}global}
    \PYG{n}{company\PYGZus{}name\PYGZus{}global} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{company\PYGZus{}name}\PYG{o}{.}\PYG{n}{data}
    \PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{submitUpdate}\PYG{o}{.}\PYG{n}{data} \PYG{o+ow}{is} \PYG{n+nb+bp}{True}\PYG{p}{:}
        \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{n}{url\PYGZus{}for}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{company\PYGZus{}app.update\PYGZus{}company}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{submitDelete}\PYG{o}{.}\PYG{n}{data} \PYG{o+ow}{is} \PYG{n+nb+bp}{True}\PYG{p}{:}
        \PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{n}{url\PYGZus{}for}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{company\PYGZus{}app.delete\PYGZus{}company}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{selectcompany.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{form} \PYG{o}{=} \PYG{n}{form}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{selectcompany.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{form} \PYG{o}{=} \PYG{n}{form}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

The role of this route is to select a company for delete or update operation. According to the selection it renders
proper route to handle the operation.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@company\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/updatecompany}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{update\PYGZus{}company}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{information} \PYG{o}{=} \PYG{n}{returnCompany}\PYG{p}{(}\PYG{n}{company\PYGZus{}name\PYGZus{}global}\PYG{p}{)}
\PYG{n}{form} \PYG{o}{=} \PYG{n}{AddCompanyForm}\PYG{p}{(}\PYG{n}{company\PYGZus{}name}\PYG{o}{=}\PYG{n}{information}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{o}{=}\PYG{n}{information}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{company\PYGZus{}id} \PYG{o}{=} \PYG{n}{information}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
\PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{submit}\PYG{o}{.}\PYG{n}{data} \PYG{o+ow}{is} \PYG{n+nb+bp}{True}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate\PYGZus{}on\PYGZus{}submit}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{name} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{company\PYGZus{}name}\PYG{o}{.}\PYG{n}{data}
        \PYG{n}{number\PYGZus{}of\PYGZus{}employees} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{o}{.}\PYG{n}{data}
        \PYG{k}{print}\PYG{p}{(}\PYG{n}{name}\PYG{p}{)}
        \PYG{k}{print}\PYG{p}{(}\PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{p}{)}
        \PYG{n}{updateCompany}\PYG{p}{(}\PYG{n}{company\PYGZus{}id}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{p}{)}
        \PYG{n}{flash}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Company updated successfully.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
        \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{adminpage.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{updatecompany.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{form} \PYG{o}{=} \PYG{n}{form}\PYG{p}{)}
\end{sphinxVerbatim}

This function get information about company from database and fill the blank form places with that information.
If you make any changes and click submit button it will call update function that applies the changes to the database.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@company\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/deletecompany}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}company}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{information} \PYG{o}{=} \PYG{n}{returnCompany}\PYG{p}{(}\PYG{n}{company\PYGZus{}name\PYGZus{}global}\PYG{p}{)}
\PYG{n}{company\PYGZus{}id} \PYG{o}{=} \PYG{n}{information}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
\PYG{n}{username} \PYG{o}{=} \PYG{n}{information}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}
\PYG{k}{print}\PYG{p}{(}\PYG{n}{username}\PYG{p}{)}
\PYG{n}{deleteCompany}\PYG{p}{(}\PYG{n}{company\PYGZus{}id}\PYG{p}{)}
\PYG{n}{deleteUser}\PYG{p}{(}\PYG{n}{username}\PYG{p}{)}
\PYG{n}{flash}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Company deleted successfully.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}admin.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}

This route get the username from the form and searches it in the database. If it finds the information, it deletes
the proper information from the database.


\subsubsection{employee\_view.py}
\label{\detokenize{developer/member1:employee-view-py}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@employee\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/addemployee}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{add\PYGZus{}employee}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{form} \PYG{o}{=} \PYG{n}{EmployeeForm}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{information} \PYG{o}{=} \PYG{n}{returnAllProjects}\PYG{p}{(}\PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{company\PYGZus{}number}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{form}\PYG{o}{.}\PYG{n}{project}\PYG{o}{.}\PYG{n}{choices} \PYG{o}{=} \PYG{n}{information}
\PYG{k}{if} \PYG{n}{form}\PYG{o}{.}\PYG{n}{validate\PYGZus{}on\PYGZus{}submit}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{name} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{name}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{surname} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{surname}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{password} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{password}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{project} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{project}\PYG{o}{.}\PYG{n}{data}
    \PYG{n}{addEmployeeToDb}\PYG{p}{(}\PYG{n}{name}\PYG{p}{,} \PYG{n}{surname}\PYG{p}{,} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{company\PYGZus{}number}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{employee\PYGZus{}id} \PYG{o}{=} \PYG{n}{returnEmployeeId}\PYG{p}{(}\PYG{n}{name}\PYG{p}{)}
    \PYG{n}{createProjectEmployeeRelation}\PYG{p}{(}\PYG{n}{employee\PYGZus{}id}\PYG{p}{,} \PYG{n}{project}\PYG{p}{)}
    \PYG{n}{user\PYGZus{}type} \PYG{o}{=} \PYG{l+m+mi}{3}
    \PYG{n}{addUserToDb}\PYG{p}{(}\PYG{n}{name}\PYG{p}{,} \PYG{n}{password}\PYG{p}{,} \PYG{n}{user\PYGZus{}type}\PYG{p}{)}
    \PYG{n}{flash}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Employee has been added successfully.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{homepage\PYGZus{}company.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{addemployee.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{form} \PYG{o}{=} \PYG{n}{form}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

This function returns a html with form. After that, it gets the information from form and send it into the function
that modifies database.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@employee\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/listemployee}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{list\PYGZus{}employee}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{form} \PYG{o}{=} \PYG{n}{EmployeeForm}\PYG{p}{(}\PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{)}
\PYG{n}{information} \PYG{o}{=} \PYG{n}{returnAllProjects}\PYG{p}{(}\PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{company\PYGZus{}number}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{form}\PYG{o}{.}\PYG{n}{project}\PYG{o}{.}\PYG{n}{choices} \PYG{o}{=} \PYG{n}{information}
\PYG{n}{tasks} \PYG{o}{=} \PYG{n}{getEmployeeFromDb}\PYG{p}{(}\PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{company\PYGZus{}number}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{listemployee.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{tasks} \PYG{o}{=} \PYG{n}{tasks}\PYG{p}{,} \PYG{n}{form} \PYG{o}{=} \PYG{n}{form}\PYG{p}{,} \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

This route first get database information about employees and then send the information into the html.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@employee\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/deleteemployee/\PYGZlt{}employee\PYGZus{}id\PYGZgt{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{delete\PYGZus{}empoloyee}\PYG{p}{(}\PYG{n}{employee\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{deleteEmployeeFromDb}\PYG{p}{(}\PYG{n}{employee\PYGZus{}id}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{n}{url\PYGZus{}for}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{employee\PYGZus{}app.list\PYGZus{}employee}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

Calls the delete function with the information of the employee comes from form data.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@employee\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/updateemployee/\PYGZlt{}employee\PYGZus{}id\PYGZgt{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{update\PYGZus{}employee}\PYG{p}{(}\PYG{n}{employee\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{form} \PYG{o}{=} \PYG{n}{EmployeeForm}\PYG{p}{(}\PYG{n}{request}\PYG{o}{.}\PYG{n}{form}\PYG{p}{)}
\PYG{n}{information} \PYG{o}{=} \PYG{n}{returnAllProjects}\PYG{p}{(}\PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{company\PYGZus{}number}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{form}\PYG{o}{.}\PYG{n}{project}\PYG{o}{.}\PYG{n}{choices} \PYG{o}{=} \PYG{n}{information}
\PYG{n}{name} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{name}\PYG{o}{.}\PYG{n}{data}
\PYG{n}{surname} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{surname}\PYG{o}{.}\PYG{n}{data}
\PYG{n}{project} \PYG{o}{=} \PYG{n}{form}\PYG{o}{.}\PYG{n}{project}\PYG{o}{.}\PYG{n}{data}
\PYG{n}{form}\PYG{o}{.}\PYG{n}{name}\PYG{o}{.}\PYG{n}{data} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{form}\PYG{o}{.}\PYG{n}{surname}\PYG{o}{.}\PYG{n}{data} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{form}\PYG{o}{.}\PYG{n}{project}\PYG{o}{.}\PYG{n}{data} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{updateEmployeeInDb}\PYG{p}{(}\PYG{n}{name}\PYG{p}{,} \PYG{n}{surname} \PYG{p}{,}\PYG{n}{employee\PYGZus{}id}\PYG{p}{)}
\PYG{n}{createProjectEmployeeRelation}\PYG{p}{(}\PYG{n}{employee\PYGZus{}id}\PYG{p}{,} \PYG{n}{project}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{redirect}\PYG{p}{(}\PYG{n}{url\PYGZus{}for}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{employee\PYGZus{}app.list\PYGZus{}employee}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

Get information from the form data and update the user comes from the route. This function calls another database
function with the information it has.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n+nd}{@employee\PYGZus{}app.route}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/listemployeetask}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{methods}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GET}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{POST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{k}{def} \PYG{n+nf}{list\PYGZus{}employee\PYGZus{}task}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{information} \PYG{o}{=} \PYG{n}{returnAllTasks}\PYG{p}{(}\PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{form} \PYG{o}{=} \PYG{n}{EmployeeForm}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{render\PYGZus{}template}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{listemployeetask.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{tasks} \PYG{o}{=} \PYG{n}{information}\PYG{p}{,} \PYG{n}{form} \PYG{o}{=} \PYG{n}{form}\PYG{p}{,}
                       \PYG{n}{username} \PYG{o}{=} \PYG{n}{session}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{username}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb+bp}{None}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

This function calls a function that returns tasks of the employee. Then it sends the information to the html file.


\subsubsection{database.py}
\label{\detokenize{developer/member1:database-py}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{initdb}\PYG{p}{(}\PYG{n}{dsn}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{k}{global} \PYG{n}{connection}
    \PYG{n}{connection} \PYG{o}{=} \PYG{n}{dbapi2}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{n}{dsn}\PYG{p}{)}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Connected to database.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Database connection failed.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{CREATE TABLE IF NOT EXISTS company (}
\PYG{l+s+s2}{                id SERIAL,}
\PYG{l+s+s2}{                name VARCHAR(20),}
\PYG{l+s+s2}{                number\PYGZus{}of\PYGZus{}employees INTEGER,}
\PYG{l+s+s2}{                PRIMARY KEY (id))}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}

    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{CREATE TABLE IF NOT EXISTS project (}
\PYG{l+s+s2}{                        id SERIAL PRIMARY KEY,}
\PYG{l+s+s2}{                        name VARCHAR(20),}
\PYG{l+s+s2}{                        company INTEGER REFERENCES company ON DELETE CASCADE)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}

    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{CREATE TABLE IF NOT EXISTS task (}
\PYG{l+s+s2}{                        id SERIAL PRIMARY KEY,}
\PYG{l+s+s2}{                        name VARCHAR(20),}
\PYG{l+s+s2}{                        priority INTEGER,}
\PYG{l+s+s2}{                        project INTEGER REFERENCES project ON DELETE CASCADE)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{CREATE TABLE IF NOT EXISTS user\PYGZus{}role (}
\PYG{l+s+s2}{                id SERIAL,}
\PYG{l+s+s2}{                role VARCHAR(10),}
\PYG{l+s+s2}{                PRIMARY KEY(id))}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{CREATE TABLE IF NOT EXISTS system\PYGZus{}user (}
\PYG{l+s+s2}{                id SERIAL,}
\PYG{l+s+s2}{                username VARCHAR(20),}
\PYG{l+s+s2}{                password VARCHAR(100),}
\PYG{l+s+s2}{                user\PYGZus{}type INTEGER REFERENCES user\PYGZus{}role ON DELETE CASCADE,}
\PYG{l+s+s2}{                PRIMARY KEY (id))}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{CREATE TABLE IF NOT EXISTS employee (}
\PYG{l+s+s2}{                id SERIAL PRIMARY KEY,}
\PYG{l+s+s2}{                name VARCHAR(20),}
\PYG{l+s+s2}{                surname VARCHAR(20),}
\PYG{l+s+s2}{                company INTEGER REFERENCES company ON DELETE CASCADE)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
    \PYG{k}{except}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{employee table cannot be created.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{finally}\PYG{p}{:}
        \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}

    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{CREATE TABLE IF NOT EXISTS project\PYGZus{}of\PYGZus{}employee (}
\PYG{l+s+s2}{                employee\PYGZus{}id INTEGER REFERENCES employee ON DELETE CASCADE,}
\PYG{l+s+s2}{                project\PYGZus{}id INTEGER REFERENCES project ON DELETE CASCADE,}
\PYG{l+s+s2}{                PRIMARY KEY(employee\PYGZus{}id, project\PYGZus{}id))}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
    \PYG{k}{except}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{project\PYGZus{}of\PYGZus{}employee table cannot be created.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{finally}\PYG{p}{:}
        \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}

    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{CREATE TABLE IF NOT EXISTS task\PYGZus{}of\PYGZus{}employee (}
\PYG{l+s+s2}{                task\PYGZus{}id INTEGER REFERENCES task ON DELETE CASCADE,}
\PYG{l+s+s2}{                employee\PYGZus{}id INTEGER REFERENCES employee ON DELETE CASCADE,}
\PYG{l+s+s2}{                PRIMARY KEY(task\PYGZus{}id, employee\PYGZus{}id))}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{k}{try}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
    \PYG{k}{except}\PYG{p}{:}
        \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{task\PYGZus{}of\PYGZus{}employee table cannot be created.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{k}{finally}\PYG{p}{:}
        \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Failed to create cursor.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}

\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}

    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO user\PYGZus{}role (id, role)}
\PYG{l+s+s2}{                VALUES (1, }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{admin}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}

    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO user\PYGZus{}role (id, role)}
\PYG{l+s+s2}{                VALUES (2, }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{company}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}

    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO user\PYGZus{}role (id, role)}
\PYG{l+s+s2}{                VALUES (3, }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{employee}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}

    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO system\PYGZus{}user (username, password, user\PYGZus{}type)}
\PYG{l+s+s2}{                        VALUES (}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{admin}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{itucsdb1712}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{, 1)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}

    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{User Roles already exists. Skip this stage}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

This function is always called at the start of the web application. It creates tables of the database, and fill the tables
with the required information. User types table is initialized with this function. Also admin username and its password inserted
into the user table by this function. If these informations already in the database at the program start, then exceptions are triggered
and handled.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{addCompanyToDb}\PYG{p}{(}\PYG{n}{company\PYGZus{}name}\PYG{p}{,} \PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO company (name, number\PYGZus{}of\PYGZus{}employees)}
\PYG{l+s+s2}{                VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{company\PYGZus{}name}\PYG{p}{,} \PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Failed to create cursor or wrong SQL Statement}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

This function, get company\_name and number\_of\_employees information and insert a company into the company table with these informations.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{addUserToDb} \PYG{p}{(}\PYG{n}{username}\PYG{p}{,} \PYG{n}{password}\PYG{p}{,} \PYG{n}{user\PYGZus{}type}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO system\PYGZus{}user (username, password, user\PYGZus{}type)}
\PYG{l+s+s2}{                VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{username}\PYG{p}{,} \PYG{n}{password}\PYG{p}{,} \PYG{n}{user\PYGZus{}type}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Failed to create cursor or wrong SQL Statement}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

This function is responsible for the login information insertions and it is called whenever a company or employee added to the system.
It takes username, password and type of the user. With these information it creates a user.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{listCompanies}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{SELECT name, number\PYGZus{}of\PYGZus{}employees FROM company}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{)}
    \PYG{n}{information} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{information}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Failed to create cursor or wrong SQL Statement}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

This function returns all the companies from the database.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{returnCompany}\PYG{p}{(}\PYG{n}{company\PYGZus{}name}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM company}
\PYG{l+s+s2}{                WHERE name = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{company\PYGZus{}name}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{information} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{information}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{returnCompany: Failed to create cursor or wrong SQL Statement}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

Selects a specific company from the database. It selects according to company name.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{updateCompany}\PYG{p}{(}\PYG{n}{company\PYGZus{}id}\PYG{p}{,} \PYG{n}{name}\PYG{p}{,} \PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{UPDATE company SET name = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, number\PYGZus{}of\PYGZus{}employees = }\PYG{l+s+si}{\PYGZpc{}s}
\PYG{l+s+s2}{                WHERE (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ = id)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{name}\PYG{p}{,} \PYG{n}{number\PYGZus{}of\PYGZus{}employees}\PYG{p}{,} \PYG{n}{company\PYGZus{}id}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{updateCompany: Failed to create cursor or wrong SQL Statement}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

Updates company with the new information provided.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{deleteCompany}\PYG{p}{(}\PYG{n}{company\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM company}
\PYG{l+s+s2}{                WHERE (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ = id)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{company\PYGZus{}id}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{deleteCompany: Failed to create cursor or wrong SQL Statement}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

Deletes company from the database with the company\_id value that it gets.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{deleteUser}\PYG{p}{(}\PYG{n}{username}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM system\PYGZus{}user}
\PYG{l+s+s2}{                WHERE (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ = username)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{username}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{deleteCompany: Failed to create cursor or wrong SQL Statement}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

If a company is deleted from the system, this function is also called to delete its user information from the database.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{getUserPwHash}\PYG{p}{(}\PYG{n}{username}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{SELECT password, user\PYGZus{}type FROM system\PYGZus{}user WHERE username = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{username}\PYG{p}{]}\PYG{p}{)}
    \PYG{n+nb}{hash} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchone}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{return} \PYG{n+nb}{hash}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{getUserPwHash: Failed to create cursor or wrong SQL Statement}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n+nb+bp}{None}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{cursor} \PYG{o+ow}{is} \PYG{o+ow}{not} \PYG{n+nb+bp}{None}\PYG{p}{:}
        \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

This function is called whenever password authorization is required.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{addEmployeeToDb}\PYG{p}{(}\PYG{n}{name}\PYG{p}{,} \PYG{n}{surname}\PYG{p}{,} \PYG{n}{company\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{addEmployeeToDb: cursor creation has failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return}
\PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO employee (name, surname, company)}
\PYG{l+s+s2}{               VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{ )}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{name}\PYG{p}{,} \PYG{n}{surname}\PYG{p}{,} \PYG{n}{company\PYGZus{}id}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{addEmployeeToDb: SQL command failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

Adds employee to the database table with the information that is provided.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{getEmployeeFromDb}\PYG{p}{(}\PYG{n}{company\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{getEmployeeFromDb: cursor creation has failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return}
\PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM employee}
\PYG{l+s+s2}{            WHERE company = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{company\PYGZus{}id}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{information} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchall}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{getEmployeeFromDb: SQL command failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{information}
\end{sphinxVerbatim}

Gets all employees that belong to the company that have logged in.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{deleteEmployeeFromDb}\PYG{p}{(}\PYG{n}{employee\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{deleteEmployeeFromDb: cursor creation has failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return}
\PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{DELETE FROM employee}
\PYG{l+s+s2}{            WHERE id = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{employee\PYGZus{}id}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{deleteEmployeeFromDb: SQL command failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

Deletes the employee with the “employee\_id” id value.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{updateEmployeeInDb}\PYG{p}{(}\PYG{n}{name}\PYG{p}{,} \PYG{n}{surname}\PYG{p}{,} \PYG{n}{employee\PYGZus{}id}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{updateEmployeeInDb: cursor creation has failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return}
\PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{UPDATE employee SET name=}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, surname=}\PYG{l+s+si}{\PYGZpc{}s}
\PYG{l+s+s2}{               WHERE (id = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{name}\PYG{p}{,} \PYG{n}{surname}\PYG{p}{,} \PYG{n}{employee\PYGZus{}id}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{updateEmployeeInDb: SQL command failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

Update the specific employee with the new information provided.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{returnEmployeeId}\PYG{p}{(}\PYG{n}{name}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{returnEmployeeId: cursor creation has failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return}
\PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{SELECT id FROM employee}
\PYG{l+s+s2}{            WHERE name = }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{name}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{information} \PYG{o}{=} \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{fetchone}\PYG{p}{(}\PYG{p}{)}
    \PYG{k}{return} \PYG{n}{information}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{returnEmployeeId: SQL command failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

Return the id of the employee with the name “name” variable that is provided.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{def} \PYG{n+nf}{createProjectEmployeeRelation}\PYG{p}{(}\PYG{n}{employee\PYGZus{}id}\PYG{p}{,} \PYG{n}{project}\PYG{p}{)}\PYG{p}{:}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor} \PYG{o}{=} \PYG{n}{connection}\PYG{o}{.}\PYG{n}{cursor}\PYG{p}{(}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{createProjectEmployeeRelation: cursor creation has failed.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
    \PYG{k}{return}
\PYG{n}{statement} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}\PYG{l+s+s2}{INSERT INTO project\PYGZus{}of\PYGZus{}employee VALUES (}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{, }\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{k}{try}\PYG{p}{:}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{execute}\PYG{p}{(}\PYG{n}{statement}\PYG{p}{,} \PYG{p}{[}\PYG{n}{employee\PYGZus{}id}\PYG{p}{,} \PYG{n}{project}\PYG{p}{]}\PYG{p}{)}
\PYG{k}{except}\PYG{p}{:}
    \PYG{k}{print}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{createProjectEmployeeRelation: SQL command failed. or passed}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{k}{finally}\PYG{p}{:}
    \PYG{n}{connection}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{cursor}\PYG{o}{.}\PYG{n}{close}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

Fills the relation table that implies the relation between employees and the projects.


\subsubsection{forms.py}
\label{\detokenize{developer/member1:forms-py}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{k}{class} \PYG{n+nc}{AddCompanyForm}\PYG{p}{(}\PYG{n}{FlaskForm}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{company\PYGZus{}name} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Company Name: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{number\PYGZus{}of\PYGZus{}employees} \PYG{o}{=} \PYG{n}{IntegerField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Number of employees: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                                   \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{company\PYGZus{}account\PYGZus{}pw} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Password: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{submit} \PYG{o}{=} \PYG{n}{SubmitField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Submit}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{k}{class} \PYG{n+nc}{SelectCompanyForm}\PYG{p}{(}\PYG{n}{FlaskForm}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{company\PYGZus{}name} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Company Name: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{submitUpdate} \PYG{o}{=} \PYG{n}{SubmitField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Update}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{submitDelete} \PYG{o}{=} \PYG{n}{SubmitField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Delete}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{k}{class} \PYG{n+nc}{LoginForm}\PYG{p}{(}\PYG{n}{FlaskForm}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{username} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Username: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{password} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Password: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{submit} \PYG{o}{=} \PYG{n}{SubmitField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Submit}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{k}{class} \PYG{n+nc}{TaskForm}\PYG{p}{(}\PYG{n}{FlaskForm}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{name} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Task name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{priority} \PYG{o}{=} \PYG{n}{IntegerField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{priority[1\PYGZhy{}10]}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{projects} \PYG{o}{=} \PYG{n}{SelectField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{project}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb}{coerce}\PYG{o}{=}\PYG{n+nb}{int}\PYG{p}{)}
\PYG{n}{submit} \PYG{o}{=} \PYG{n}{SubmitField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Submit}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{k}{class} \PYG{n+nc}{ProjectForm}\PYG{p}{(}\PYG{n}{FlaskForm}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{name} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Project name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{submit} \PYG{o}{=} \PYG{n}{SubmitField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Submit}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{k}{class} \PYG{n+nc}{EmployeeForm}\PYG{p}{(}\PYG{n}{FlaskForm}\PYG{p}{)}\PYG{p}{:}
\PYG{n}{name} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Name: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{surname} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Surname: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{project} \PYG{o}{=} \PYG{n}{SelectField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{project}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n+nb}{coerce}\PYG{o}{=}\PYG{n+nb}{int}\PYG{p}{)}
\PYG{n}{password} \PYG{o}{=} \PYG{n}{StringField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Password: }\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,} \PYG{n}{validators}\PYG{o}{=}\PYG{p}{[}\PYG{n}{DataRequired}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{submit} \PYG{o}{=} \PYG{n}{SubmitField}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Submit}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}

This python file includes class deceleration of the web forms that is used in html files.


\subsection{Parts Implemented by Muhammed Isiyok}
\label{\detokenize{developer/member2:parts-implemented-by-muhammed-isiyok}}\label{\detokenize{developer/member2::doc}}


\renewcommand{\indexname}{Index}
\printindex
\end{document}